FROM labsonar/pytorch

USER root

RUN wget -L -O oases.tar.gz "https://github.com/labsonar/docker/releases/download/channel_modelling/oases.tar.gz"

RUN tar -zxvf oases.tar.gz && \
    cd oases && \
    ./root_install && \
    cd .. && \
    rm oases.tar.gz && \
    rm -rf ./oases


RUN wget -L -O traceo.tar.gz "https://github.com/labsonar/docker/releases/download/traceo/traceo.tar.gz"

RUN tar -zxvf traceo.tar.gz && \
    cd traceo && \
    ./root_install && \
    cd .. && \
    rm traceo.tar.gz && \
    rm -rf ./traceo

ARG MY_USER
USER ${MY_USER:-root}